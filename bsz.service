# Busuanzi systemd service
# 安装: sudo cp bsz.service /etc/systemd/system/
# 启用: sudo systemctl enable --now bsz

[Unit]
Description=Busuanzi Visitor Statistics
After=network.target

[Service]
Type=simple
User=www-data
Group=www-data
WorkingDirectory=/opt/bsz
ExecStart=/opt/bsz/busuanzi-rs
Restart=on-failure
RestartSec=5

# 环境变量 (或使用 .env 文件)
Environment=PORT=8080
Environment=ADMIN_TOKEN=your-token
Environment=SAVE_INTERVAL=30

# 安全加固
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/opt/bsz
PrivateTmp=true

[Install]
WantedBy=multi-user.target
