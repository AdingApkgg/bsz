# Busuanzi Compose (Podman/Docker)
# Usage: podman-compose up -d  or  docker compose up -d

services:
  busuanzi:
    build: .
    container_name: busuanzi
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data
    environment:
      - WEB_ADDRESS=0.0.0.0:8080
      - WEB_CORS=*
      - BSZ_SECRET=${BSZ_SECRET:-change-me}
      - BSZ_ENCRYPT=MD516
      - BSZ_PATH_STYLE=true
      - ADMIN_TOKEN=${ADMIN_TOKEN:-}
      - SAVE_INTERVAL=30
    restart: always
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/ping"]
      interval: 30s
      timeout: 10s
      retries: 3
